# 车身缺陷检测系统

## 1. 项目简介

该软件主要用于车身缺陷检测，基于Python和PyQt6设计，支持自定义检测权重文件、设置检测阈值、配置检测类型等，能够针对汽车外观位置对检测结果进行查看，支持检测历史记录的保存，方便回溯。

## 2. 功能特点

- **多摄像头支持**：可通过下拉框选择不同摄像头
- **实时视频显示**：使用QVideoWidget显示摄像头实时画面
- **缺陷检测配置**：支持划痕检测和凹坑检测两种模式
- **检测参数设置**：可调整置信度阈值和交叉比阈值
- **串口通信**：支持自动检测系统串口并进行配置
- **历史记录查询**：可按日期和缺陷类型查询历史检测记录
- **权重文件选择**：支持自定义选择检测模型权重文件

## 3. 系统界面

系统主要包含三个功能界面：

### 3.1 开始检测

此界面用于实时视频显示和缺陷检测控制，主要功能包括：

- 摄像头选择与控制
- 检测类型选择（划痕/凹坑）
- 检测参数设置
- 串口通信配置
- 权重文件选择

### 3.2 查看结果

此界面用于查看检测结果，可以查看不同位置的缺陷检测图像，并可以按类型筛选查看。

### 3.3 历史记录

此界面用于查询历史检测记录，可以按日期范围和缺陷类型进行筛选查询。

## 4. 技术实现

### 4.1 开发环境

- **编程语言**：Python 3.x
- **GUI框架**：PyQt6
- **视频处理**：PyQt6 Multimedia模块
- **串口通信**：pyserial库
- **检测算法**：基于深度学习的目标检测算法

### 4.2 主要模块

- **GUI界面模块**：基于QMainWindow实现的主界面
- **视频采集模块**：使用QCamera和QVideoWidget实现
- **缺陷检测模块**：集成深度学习模型进行缺陷识别
- **串口通信模块**：使用pyserial库实现串口设备检测和通信
- **历史记录模块**：实现检测结果的保存和查询

## 5. 安装与使用

### 5.1 环境要求

- Python 3.6+
- PyQt6
- pyserial (用于串口通信)
- 其他依赖库 (可通过requirements.txt安装)

### 5.2 安装步骤

1. 克隆或下载项目代码
2. 安装依赖库：
   ```
   pip install -r requirements.txt
   ```
3. 运行主程序：
   ```
   python defect_detection.py
   ```

### 5.3 使用说明

1. **打开摄像头**：点击"打开摄像头"按钮，从下拉框选择摄像头
2. **配置检测参数**：设置置信度阈值和交叉比阈值
3. **选择检测类型**：勾选"划痕检测"或"凹坑检测"
4. **选择权重文件**：点击"选择权重文件"按钮选择模型文件
5. **开始检测**：点击"开始检测"按钮进行实时检测
6. **查看结果**：切换到"查看结果"标签页查看检测结果
7. **查询历史**：切换到"历史记录"标签页，设置日期范围和缺陷类型进行查询

## 6. 注意事项

- 首次使用需要配置权重文件
- 检测效果与摄像头质量和光照条件有关
- 串口功能需要安装pyserial库
- 关闭摄像头后视频区域会变为黑色

## 7. 开发与扩展

系统采用模块化设计，便于扩展和二次开发：

- 可添加新的检测算法和模型
- 可扩展更多的通信方式（如网络通信）
- 可定制化界面和功能
